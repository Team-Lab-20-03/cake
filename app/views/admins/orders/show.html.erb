<div class="container">
	<div class="row">
		<h3>注文履歴詳細</h3>

		<!-- 注文者情報 -->
		<table class="table">
			<tr>
				<th>購入者</th>
				<td>
					<%= link_to admins_customer_path(@order.customer_id) do %>
						<%= @order.customer.last_name + @order.customer.first_name %>
					<% end %>
				</td>
			</tr>
			<tr>
				<th>配送先</th>
				<td>
					〒	<%= @order.delivery_zip_code + ' ' + @order.delivery_address %><br>
					<%= @order.delivery_name %>
				</td>
			</tr>
			<tr>
				<th>支払い方法</th>
				<td><%= @order.is_credit %></td>
			</tr>
			<tr>
				<th>注文ステータス</th>
				<td>
					<%= form_for [:admins, @order] do |f| %>
					<%= f.select :ordered_status, Order.ordered_statuses.keys.to_a %>
					<%= f.submit '更新' %>
				</td>
			</tr>
		</table>

		<!-- 注文商品一覧 -->
		<div class="">
			<table class="table">
				<tr>
					<th>商品名</th>
					<th>単価（税込）</th>
					<th>数量</th>
					<th>小計</th>
					<th>製作ステータス</th>
					<th></th>
				</tr>
				<% @ordered_products.each do |ordered_product| %>
					<tr>
						<td><%= ordered_product.name %></td>
						<td><%= ordered_product.price %></td>
						<td><%= ordered_product.quantity %></td>
						<!-- 小計の値はordered_productsモデルで定義 -->
						<td></td>
						<%= form_for [:admins, ordered_product] do |f| %>
							<td><%= f.select :create_status, OrderedProduct.create_statuses.keys.to_a %></td>
							<td><%= f.submit '更新' %></td>
						<% end %>
					</tr>
				<% end %>
			</table>
		</div>

		<div class="">
			<table class="table">
				<tr>
					<th>商品合計金額</th>
					<td><% @ordered_products.subtotal_price %>円</td>
				</tr>
				<tr>
					<th>送料</th>
					<td><%= @order.postage %></td>
				</tr>
				<tr>
					<th>請求金額</th>
					<td><%= @order.order_total %></td>
				</tr>
			</table>
		</div>
	</div>
</div>